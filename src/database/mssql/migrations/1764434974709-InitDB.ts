import { MigrationInterface, QueryRunner } from "typeorm";

export class InitDB1764434974709 implements MigrationInterface {
    name = 'InitDB1764434974709'

    public async up(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`CREATE TABLE "user_activity" ("user_id" uniqueidentifier NOT NULL, "recent_date" date, "active_second" int, "streak" int, CONSTRAINT "PK_11108754ec780c670440e32baad" PRIMARY KEY ("user_id"))`);
        await queryRunner.query(`CREATE TABLE "user_settings" ("user_id" uniqueidentifier NOT NULL, "math_score_goal" int, "rd_wt_score_goal" int, "next_test_date" date, CONSTRAINT "CHK_81fbadefb56ff09361e15e95e9" CHECK ((rd_wt_score_goal IS NULL OR (rd_wt_score_goal >= 200 AND rd_wt_score_goal <= 800))), CONSTRAINT "CHK_faa444f1234c46d9de5190e159" CHECK ((math_score_goal IS NULL OR (math_score_goal >= 200 AND math_score_goal <= 800))), CONSTRAINT "PK_4ed056b9344e6f7d8d46ec4b302" PRIMARY KEY ("user_id"))`);
        await queryRunner.query(`CREATE TABLE "subscription" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_8c3e00ebd02103caa1174cd5d9d" DEFAULT NEWSEQUENTIALID(), "created_at" datetime2 NOT NULL CONSTRAINT "DF_9a97c3ebf1bef5345852963e4ce" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_91bb2de5bde9e365d7985d2e4d9" DEFAULT getdate(), "deleted_at" datetime2, "sequence_id" int NOT NULL IDENTITY(1,1), "subscription_code"  AS ('SUB' + RIGHT('0000' + CAST(sequence_id AS VARCHAR), 4)) PERSISTED NOT NULL, "description" text, "name" varchar(255) NOT NULL, "type" varchar(255) CONSTRAINT CHK_f4053e007ecfc2c41175bf6888_ENUM CHECK(type IN ('free','basic','premium','premium_plus')), "is_active" bit NOT NULL CONSTRAINT "DF_e9b22d2d847a462cba1753363d0" DEFAULT 1, "price" decimal(10,2), "duration" int, CONSTRAINT "PK_8c3e00ebd02103caa1174cd5d9d" PRIMARY KEY ("id"))`);
        await queryRunner.query(`INSERT INTO "master".."typeorm_metadata"("database", "schema", "table", "type", "name", "value") VALUES (@0, @1, @2, @3, @4, @5)`, ["master","dbo","subscription","GENERATED_COLUMN","subscription_code","'SUB' + RIGHT('0000' + CAST(sequence_id AS VARCHAR), 4)"]);
        await queryRunner.query(`CREATE TABLE "user_subscription_map" ("user_id" uniqueidentifier NOT NULL, "subscription_id" uniqueidentifier NOT NULL, "status" varchar(50), "payment_link" varchar(500), "cancelled_at" datetime2, "cancel_reason" text, CONSTRAINT "PK_90c1458df00ea171eb86751d69d" PRIMARY KEY ("user_id", "subscription_id"))`);
        await queryRunner.query(`CREATE TABLE "user" ("user_id" uniqueidentifier NOT NULL CONSTRAINT "DF_758b8ce7c18b9d347461b30228d" DEFAULT NEWSEQUENTIALID(), "first_name" varchar(255) NOT NULL, "last_name" varchar(255) NOT NULL, "email" varchar(255) NOT NULL, "status" varchar(255) CONSTRAINT CHK_3c180238e1372d71d61698375e_ENUM CHECK(status IN ('ACTIVE','INACTIVE','ANONYMOUS')), "password" varchar(255), "role" varchar(255) CONSTRAINT CHK_a021edcf10f1d2fea1eccb3909_ENUM CHECK(role IN ('STUDENT','TUTOR','ADMIN')), "rd_wt_score" int, "math_score" int, "phone_number" varchar(20), "total_score" int, "certification" varchar(255), "specialty" varchar(255), CONSTRAINT "PK_758b8ce7c18b9d347461b30228d" PRIMARY KEY ("user_id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "IDX_e12875dfb3b1d92d7d7c5377e2" ON "user" ("email") `);
        await queryRunner.query(`CREATE TABLE "user_note" ("lesson_content_id" uniqueidentifier NOT NULL, "user_id" uniqueidentifier NOT NULL, "content" text, "color" varchar(50), CONSTRAINT "UQ_9d41aebd526b5d0e1713063b0e2" UNIQUE ("lesson_content_id", "user_id"), CONSTRAINT "PK_9d41aebd526b5d0e1713063b0e2" PRIMARY KEY ("lesson_content_id", "user_id"))`);
        await queryRunner.query(`CREATE TABLE "lesson_content" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_5fef8c6108f740abaffb27df92d" DEFAULT NEWSEQUENTIALID(), "created_at" datetime2 NOT NULL CONSTRAINT "DF_02dc09aea08912ab193ec6494b9" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_a43d4843c6fcfb462efa38383ea" DEFAULT getdate(), "deleted_at" datetime2, "content" text, "type" varchar(255) CONSTRAINT CHK_5a7b40afc9d9acfeac01c66e48_ENUM CHECK(type IN ('doc','text','inline_math')), "content_parent_id" uniqueidentifier, "lesson_id" uniqueidentifier NOT NULL, "order" int, CONSTRAINT "PK_5fef8c6108f740abaffb27df92d" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "lesson" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_0ef25918f0237e68696dee455bd" DEFAULT NEWSEQUENTIALID(), "created_at" datetime2 NOT NULL CONSTRAINT "DF_5132617cc101f366a358747a730" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_91967ee89e047974efeec104862" DEFAULT getdate(), "deleted_at" datetime2, "title" varchar(255) NOT NULL, "sub_title" varchar(255), "previous_lesson_id" uniqueidentifier, "next_lesson_id" uniqueidentifier, "chapter_id" uniqueidentifier NOT NULL, CONSTRAINT "PK_0ef25918f0237e68696dee455bd" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE UNIQUE INDEX "REL_3a1d144f8d82ad8d905137a859" ON "lesson" ("previous_lesson_id") WHERE "previous_lesson_id" IS NOT NULL`);
        await queryRunner.query(`CREATE UNIQUE INDEX "REL_8c819bce2b1d076ae7d8535872" ON "lesson" ("next_lesson_id") WHERE "next_lesson_id" IS NOT NULL`);
        await queryRunner.query(`CREATE TABLE "mission_task" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_3e0032a00963be7c682d3097b19" DEFAULT NEWSEQUENTIALID(), "created_at" datetime2 NOT NULL CONSTRAINT "DF_7e68b1dbb04583e22c62967eebc" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_f42681caf618f150dcf38489868" DEFAULT getdate(), "deleted_at" datetime2, "title" varchar(255) NOT NULL, "description" text, "able_to_ignored" bit NOT NULL CONSTRAINT "DF_d0dedc5ccd84104af20e6624a37" DEFAULT 0, "phase" varchar(100), "order" int, CONSTRAINT "PK_3e0032a00963be7c682d3097b19" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "mission_task_mission_item_map" ("mission_task_id" uniqueidentifier NOT NULL, "mission_task_item_id" uniqueidentifier NOT NULL, "order" int, "missionTask_id" uniqueidentifier, "missionTaskItem_id" uniqueidentifier, CONSTRAINT "UQ_b448c9b5b78cdd9cbd4e0d700e0" UNIQUE ("mission_task_id", "mission_task_item_id"), CONSTRAINT "PK_b448c9b5b78cdd9cbd4e0d700e0" PRIMARY KEY ("mission_task_id", "mission_task_item_id"))`);
        await queryRunner.query(`CREATE TABLE "user_mission_task_item" ("user_id" uniqueidentifier NOT NULL, "mission_task_item_id" uniqueidentifier NOT NULL, "is_completed" bit NOT NULL CONSTRAINT "DF_458b0015c9afa02d77181fe40ad" DEFAULT 0, CONSTRAINT "UQ_66c2d84236035902ac741aa1080" UNIQUE ("user_id", "mission_task_item_id"), CONSTRAINT "PK_66c2d84236035902ac741aa1080" PRIMARY KEY ("user_id", "mission_task_item_id"))`);
        await queryRunner.query(`CREATE TABLE "mission_task_item" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_dba97e4b49e7d5a6837fb5d89c1" DEFAULT NEWSEQUENTIALID(), "created_at" datetime2 NOT NULL CONSTRAINT "DF_e1e52440a0afd0ad2667f555b89" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_543e10fcc8e2d8497f5ac9088bc" DEFAULT getdate(), "deleted_at" datetime2, "able_to_ignored" bit NOT NULL CONSTRAINT "DF_5a4f922433decd88e1348de32e5" DEFAULT 0, "type" varchar(255) CONSTRAINT CHK_8266d5b9d1ecf7c18a898d54fb_ENUM CHECK(type IN ('read_lesson','take_quizz','take_chapter_test','review','test_assessment')) NOT NULL, "content" text, "title" varchar(255), "chapter_id" uniqueidentifier, CONSTRAINT "PK_dba97e4b49e7d5a6837fb5d89c1" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "image" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_d6db1ab4ee9ad9dbe86c64e4cc3" DEFAULT NEWSEQUENTIALID(), "created_at" datetime2 NOT NULL CONSTRAINT "DF_1ff0596db48ed368ba7edf5e50e" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_fecc3cdf81665986eb368b9ee4a" DEFAULT getdate(), "deleted_at" datetime2, "data" text, "width" int, "height" int, "checksum" varchar(255), CONSTRAINT "PK_d6db1ab4ee9ad9dbe86c64e4cc3" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "question_image" ("image_id" uniqueidentifier NOT NULL, "question_id" uniqueidentifier NOT NULL, CONSTRAINT "UQ_f87e718ba982d22ac1a36074493" UNIQUE ("image_id", "question_id"), CONSTRAINT "PK_f87e718ba982d22ac1a36074493" PRIMARY KEY ("image_id", "question_id"))`);
        await queryRunner.query(`CREATE TABLE "question_option" ("question_id" uniqueidentifier NOT NULL, "value" varchar(10), "name_option" varchar(500) NOT NULL, CONSTRAINT "UQ_ece406fe6483960e34a9f35bb78" UNIQUE ("question_id", "name_option"), CONSTRAINT "PK_c6bdd9164135d2d2814766cee0f" PRIMARY KEY ("name_option"))`);
        await queryRunner.query(`CREATE TABLE "test_session" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_024c31333d823427006b7f9dd76" DEFAULT NEWSEQUENTIALID(), "created_at" datetime2 NOT NULL CONSTRAINT "DF_1942479841430cc2e3cf55d939a" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_3ce57624e8663a1021cf8c4c716" DEFAULT getdate(), "deleted_at" datetime2, "user_id" uniqueidentifier NOT NULL, "test_type" varchar(255) CONSTRAINT CHK_ca67f56deb69022904f91fbd45_ENUM CHECK(test_type IN ('diagnostic','custom','chapter_test','quizz')), "test_name" varchar(255), "total_question" int, "time_limit_second" int, "status" varchar(255) CONSTRAINT CHK_fd2a7bb97338493578118662a7_ENUM CHECK(status IN ('not_started','in_progress','paused','completed','abandoned')), "current_question_index" int, "number_question_answered" int, "started_at" datetime2, "paused_at" datetime2, "completed_at" datetime2, "reference_type" varchar(255) CONSTRAINT CHK_7d07ffd3140703f51c15d0e01a_ENUM CHECK(reference_type IN ('template_module','template')), "reference_id" uniqueidentifier, "number_question_correct" int, CONSTRAINT "CHK_eb0ed822cb0078c0c7b54debfd" CHECK ((started_at IS NULL OR paused_at IS NULL OR started_at <= paused_at) AND (started_at IS NULL OR completed_at IS NULL OR started_at <= completed_at) AND (paused_at IS NULL OR completed_at IS NULL OR paused_at <= completed_at)), CONSTRAINT "PK_024c31333d823427006b7f9dd76" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "test_session_question" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_226ad37658abdfee5ed2903bcba" DEFAULT NEWSEQUENTIALID(), "created_at" datetime2 NOT NULL CONSTRAINT "DF_7e6f6f83be469db9c0f6ae33036" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_1c03d5246e35d2c9f29c572492e" DEFAULT getdate(), "deleted_at" datetime2, "question_id" uniqueidentifier NOT NULL, "answered_at" datetime2, "time_spent" int, "is_correct" bit, "order" int, "is_answered" bit NOT NULL CONSTRAINT "DF_d54fecda2eb17fee38fcc18e351" DEFAULT 0, "is_flagged" bit NOT NULL CONSTRAINT "DF_edd245de6a7a42af017dc9243f4" DEFAULT 0, "answer" varchar(255), "test_session_id" uniqueidentifier, CONSTRAINT "PK_226ad37658abdfee5ed2903bcba" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "question" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_21e5786aa0ea704ae185a79b2d5" DEFAULT NEWSEQUENTIALID(), "created_at" datetime2 NOT NULL CONSTRAINT "DF_5af825eed93261a3eb174619cea" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_ff92eabb025bbf1f667bfbb7018" DEFAULT getdate(), "deleted_at" datetime2, "status" varchar(255) CONSTRAINT CHK_13fda78729ebe488f614eaa66f_ENUM CHECK(status IN ('in_review','approved','rejected','considering')) NOT NULL CONSTRAINT "DF_971de984acb4f35388c89619482" DEFAULT 'in_review', "question_text" text, "correct_answer" varchar(255), "difficulty" varchar(255) CONSTRAINT CHK_9c753958054ae0e894bf2a7b0f_ENUM CHECK(difficulty IN ('easy','medium','hard')), "explanation" text, "kind" varchar(255) CONSTRAINT CHK_b65ad3adee4f51e91a46a06f0d_ENUM CHECK(kind IN ('multiple_choice','free_response')) NOT NULL CONSTRAINT "DF_1f907c6746ae7efb43cb039b771" DEFAULT 'multiple_choice', "type" varchar(255) CONSTRAINT CHK_ea54915f0beea12cb5a840b686_ENUM CHECK(type IN ('math','reading_and_writing')), "tutor_id" uniqueidentifier, "tutorUserId" uniqueidentifier, CONSTRAINT "PK_21e5786aa0ea704ae185a79b2d5" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "test_template_question" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_806753b07b72f6e7770bcb9e81c" DEFAULT NEWSEQUENTIALID(), "created_at" datetime2 NOT NULL CONSTRAINT "DF_92e46834fe8488b163f931b175b" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_f861f605f545286eb9c3bfbfec4" DEFAULT getdate(), "deleted_at" datetime2, "test_template_module_id" uniqueidentifier NOT NULL, "question_id" uniqueidentifier NOT NULL, "order" int, CONSTRAINT "PK_806753b07b72f6e7770bcb9e81c" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "test_template" ("test_template_id" uniqueidentifier NOT NULL CONSTRAINT "DF_74ff1796abc9df5bc1d4748baff" DEFAULT NEWSEQUENTIALID(), "sequence_id" int NOT NULL IDENTITY(1,1), "template_code"  AS ('TPL' + RIGHT('0000' + CAST(sequence_id AS VARCHAR), 4)) PERSISTED NOT NULL, "is_public" bit NOT NULL CONSTRAINT "DF_6e633e757414b3172e215f15792" DEFAULT 0, "name" varchar(255) NOT NULL, "description" text, "topic" varchar(255), "test_type" varchar(255) CONSTRAINT CHK_c92f9280349e878dbf2c98f6d5_ENUM CHECK(test_type IN ('diagnostic','custom','chapter_test','quizz')), "content_tier" varchar(100), CONSTRAINT "PK_74ff1796abc9df5bc1d4748baff" PRIMARY KEY ("test_template_id"))`);
        await queryRunner.query(`INSERT INTO "master".."typeorm_metadata"("database", "schema", "table", "type", "name", "value") VALUES (@0, @1, @2, @3, @4, @5)`, ["master","dbo","test_template","GENERATED_COLUMN","template_code","'TPL' + RIGHT('0000' + CAST(sequence_id AS VARCHAR), 4)"]);
        await queryRunner.query(`CREATE TABLE "test_template_module" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_74d47cac35c63b02f756055902d" DEFAULT NEWSEQUENTIALID(), "created_at" datetime2 NOT NULL CONSTRAINT "DF_69fdd0b357bb0e4150337f2a94e" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_eedb4f810398696e1a6547aecb5" DEFAULT getdate(), "deleted_at" datetime2, "difficulty" varchar(255) CONSTRAINT CHK_707f2d24a614fdfa35104b8e84_ENUM CHECK(difficulty IN ('easy','medium','hard')), "name" varchar(255), "type" varchar(100), "total_question" int, "time_limit_second" int, "test_template_id" uniqueidentifier, "chapter_id" uniqueidentifier, CONSTRAINT "PK_74d47cac35c63b02f756055902d" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "chapter" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_275bd1c62bed7dff839680614ca" DEFAULT NEWSEQUENTIALID(), "created_at" datetime2 NOT NULL CONSTRAINT "DF_efd4f69d4fd8bfcd692bf077f64" DEFAULT getdate(), "updated_at" datetime2 NOT NULL CONSTRAINT "DF_7e5816bb957c82b39a66d6f0413" DEFAULT getdate(), "deleted_at" datetime2, "title" varchar(255) NOT NULL, "description" text, "type" varchar(255) CONSTRAINT CHK_8a861dd7ae5f6f6586e89ccee2_ENUM CHECK(type IN ('math','reading_and_writing')), "order" int, CONSTRAINT "PK_275bd1c62bed7dff839680614ca" PRIMARY KEY ("id"))`);
        await queryRunner.query(`ALTER TABLE "user_activity" ADD CONSTRAINT "FK_11108754ec780c670440e32baad" FOREIGN KEY ("user_id") REFERENCES "user"("user_id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "user_settings" ADD CONSTRAINT "FK_4ed056b9344e6f7d8d46ec4b302" FOREIGN KEY ("user_id") REFERENCES "user"("user_id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "user_subscription_map" ADD CONSTRAINT "FK_4bb7985d0122430348b07924ca3" FOREIGN KEY ("user_id") REFERENCES "user"("user_id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "user_subscription_map" ADD CONSTRAINT "FK_bbe657e3b082516641d34d58552" FOREIGN KEY ("subscription_id") REFERENCES "subscription"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "user_note" ADD CONSTRAINT "FK_1eecd0b6a12f490d603202c2fb7" FOREIGN KEY ("lesson_content_id") REFERENCES "lesson_content"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "user_note" ADD CONSTRAINT "FK_6595751ffb8e1f968857d7ba436" FOREIGN KEY ("user_id") REFERENCES "user"("user_id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "lesson_content" ADD CONSTRAINT "FK_c664ad201989219f499b66359ad" FOREIGN KEY ("lesson_id") REFERENCES "lesson"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "lesson" ADD CONSTRAINT "FK_3a1d144f8d82ad8d905137a8593" FOREIGN KEY ("previous_lesson_id") REFERENCES "lesson"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "lesson" ADD CONSTRAINT "FK_8c819bce2b1d076ae7d85358726" FOREIGN KEY ("next_lesson_id") REFERENCES "lesson"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "lesson" ADD CONSTRAINT "FK_cda7676f5f73f9b60650dd405f8" FOREIGN KEY ("chapter_id") REFERENCES "chapter"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "mission_task_mission_item_map" ADD CONSTRAINT "FK_3e883a8b29b3f4a524c1a8dc1ea" FOREIGN KEY ("missionTask_id") REFERENCES "mission_task"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "mission_task_mission_item_map" ADD CONSTRAINT "FK_d97afb80207620ba3020040760b" FOREIGN KEY ("missionTaskItem_id") REFERENCES "mission_task_item"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "user_mission_task_item" ADD CONSTRAINT "FK_95d9713316ad51c7d152fb99db6" FOREIGN KEY ("user_id") REFERENCES "user"("user_id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "user_mission_task_item" ADD CONSTRAINT "FK_0a6aec381b055dcc61b07cfc722" FOREIGN KEY ("mission_task_item_id") REFERENCES "mission_task_item"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "mission_task_item" ADD CONSTRAINT "FK_eb40b5bb38ed417fdc80ab5cf4f" FOREIGN KEY ("chapter_id") REFERENCES "chapter"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "question_image" ADD CONSTRAINT "FK_c21194926e91b775d3aa083a216" FOREIGN KEY ("image_id") REFERENCES "image"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "question_image" ADD CONSTRAINT "FK_70b32d78bb0bb3e17685bdfc4b4" FOREIGN KEY ("question_id") REFERENCES "question"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "question_option" ADD CONSTRAINT "FK_747190c37a39feced5efcbb303f" FOREIGN KEY ("question_id") REFERENCES "question"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "test_session" ADD CONSTRAINT "FK_689c4ce1219d17cce26be9ea495" FOREIGN KEY ("user_id") REFERENCES "user"("user_id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "test_session_question" ADD CONSTRAINT "FK_cfffb8f92724dad81a0a4749834" FOREIGN KEY ("test_session_id") REFERENCES "test_session"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "test_session_question" ADD CONSTRAINT "FK_76229c435fb35af360c50261000" FOREIGN KEY ("question_id") REFERENCES "question"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "question" ADD CONSTRAINT "FK_0850e2d9aec9c18b7e391d4e41a" FOREIGN KEY ("tutorUserId") REFERENCES "user"("user_id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "test_template_question" ADD CONSTRAINT "FK_01779825347b017222632932f8e" FOREIGN KEY ("test_template_module_id") REFERENCES "test_template_module"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "test_template_question" ADD CONSTRAINT "FK_fc05e826592a8772c76dc39eddf" FOREIGN KEY ("question_id") REFERENCES "question"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "test_template_module" ADD CONSTRAINT "FK_fcb5c73fa68c5a008c305683718" FOREIGN KEY ("test_template_id") REFERENCES "test_template"("test_template_id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "test_template_module" ADD CONSTRAINT "FK_365699c2ad39a6ff2c566acfd8f" FOREIGN KEY ("chapter_id") REFERENCES "chapter"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
    }

    public async down(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`ALTER TABLE "test_template_module" DROP CONSTRAINT "FK_365699c2ad39a6ff2c566acfd8f"`);
        await queryRunner.query(`ALTER TABLE "test_template_module" DROP CONSTRAINT "FK_fcb5c73fa68c5a008c305683718"`);
        await queryRunner.query(`ALTER TABLE "test_template_question" DROP CONSTRAINT "FK_fc05e826592a8772c76dc39eddf"`);
        await queryRunner.query(`ALTER TABLE "test_template_question" DROP CONSTRAINT "FK_01779825347b017222632932f8e"`);
        await queryRunner.query(`ALTER TABLE "question" DROP CONSTRAINT "FK_0850e2d9aec9c18b7e391d4e41a"`);
        await queryRunner.query(`ALTER TABLE "test_session_question" DROP CONSTRAINT "FK_76229c435fb35af360c50261000"`);
        await queryRunner.query(`ALTER TABLE "test_session_question" DROP CONSTRAINT "FK_cfffb8f92724dad81a0a4749834"`);
        await queryRunner.query(`ALTER TABLE "test_session" DROP CONSTRAINT "FK_689c4ce1219d17cce26be9ea495"`);
        await queryRunner.query(`ALTER TABLE "question_option" DROP CONSTRAINT "FK_747190c37a39feced5efcbb303f"`);
        await queryRunner.query(`ALTER TABLE "question_image" DROP CONSTRAINT "FK_70b32d78bb0bb3e17685bdfc4b4"`);
        await queryRunner.query(`ALTER TABLE "question_image" DROP CONSTRAINT "FK_c21194926e91b775d3aa083a216"`);
        await queryRunner.query(`ALTER TABLE "mission_task_item" DROP CONSTRAINT "FK_eb40b5bb38ed417fdc80ab5cf4f"`);
        await queryRunner.query(`ALTER TABLE "user_mission_task_item" DROP CONSTRAINT "FK_0a6aec381b055dcc61b07cfc722"`);
        await queryRunner.query(`ALTER TABLE "user_mission_task_item" DROP CONSTRAINT "FK_95d9713316ad51c7d152fb99db6"`);
        await queryRunner.query(`ALTER TABLE "mission_task_mission_item_map" DROP CONSTRAINT "FK_d97afb80207620ba3020040760b"`);
        await queryRunner.query(`ALTER TABLE "mission_task_mission_item_map" DROP CONSTRAINT "FK_3e883a8b29b3f4a524c1a8dc1ea"`);
        await queryRunner.query(`ALTER TABLE "lesson" DROP CONSTRAINT "FK_cda7676f5f73f9b60650dd405f8"`);
        await queryRunner.query(`ALTER TABLE "lesson" DROP CONSTRAINT "FK_8c819bce2b1d076ae7d85358726"`);
        await queryRunner.query(`ALTER TABLE "lesson" DROP CONSTRAINT "FK_3a1d144f8d82ad8d905137a8593"`);
        await queryRunner.query(`ALTER TABLE "lesson_content" DROP CONSTRAINT "FK_c664ad201989219f499b66359ad"`);
        await queryRunner.query(`ALTER TABLE "user_note" DROP CONSTRAINT "FK_6595751ffb8e1f968857d7ba436"`);
        await queryRunner.query(`ALTER TABLE "user_note" DROP CONSTRAINT "FK_1eecd0b6a12f490d603202c2fb7"`);
        await queryRunner.query(`ALTER TABLE "user_subscription_map" DROP CONSTRAINT "FK_bbe657e3b082516641d34d58552"`);
        await queryRunner.query(`ALTER TABLE "user_subscription_map" DROP CONSTRAINT "FK_4bb7985d0122430348b07924ca3"`);
        await queryRunner.query(`ALTER TABLE "user_settings" DROP CONSTRAINT "FK_4ed056b9344e6f7d8d46ec4b302"`);
        await queryRunner.query(`ALTER TABLE "user_activity" DROP CONSTRAINT "FK_11108754ec780c670440e32baad"`);
        await queryRunner.query(`DROP TABLE "chapter"`);
        await queryRunner.query(`DROP TABLE "test_template_module"`);
        await queryRunner.query(`DELETE FROM "master".."typeorm_metadata" WHERE "type" = @0 AND "name" = @1 AND "database" = @2 AND "schema" = @3 AND "table" = @4`, ["GENERATED_COLUMN","template_code","master","dbo","test_template"]);
        await queryRunner.query(`DROP TABLE "test_template"`);
        await queryRunner.query(`DROP TABLE "test_template_question"`);
        await queryRunner.query(`DROP TABLE "question"`);
        await queryRunner.query(`DROP TABLE "test_session_question"`);
        await queryRunner.query(`DROP TABLE "test_session"`);
        await queryRunner.query(`DROP TABLE "question_option"`);
        await queryRunner.query(`DROP TABLE "question_image"`);
        await queryRunner.query(`DROP TABLE "image"`);
        await queryRunner.query(`DROP TABLE "mission_task_item"`);
        await queryRunner.query(`DROP TABLE "user_mission_task_item"`);
        await queryRunner.query(`DROP TABLE "mission_task_mission_item_map"`);
        await queryRunner.query(`DROP TABLE "mission_task"`);
        await queryRunner.query(`DROP INDEX "REL_8c819bce2b1d076ae7d8535872" ON "lesson"`);
        await queryRunner.query(`DROP INDEX "REL_3a1d144f8d82ad8d905137a859" ON "lesson"`);
        await queryRunner.query(`DROP TABLE "lesson"`);
        await queryRunner.query(`DROP TABLE "lesson_content"`);
        await queryRunner.query(`DROP TABLE "user_note"`);
        await queryRunner.query(`DROP INDEX "IDX_e12875dfb3b1d92d7d7c5377e2" ON "user"`);
        await queryRunner.query(`DROP TABLE "user"`);
        await queryRunner.query(`DROP TABLE "user_subscription_map"`);
        await queryRunner.query(`DELETE FROM "master".."typeorm_metadata" WHERE "type" = @0 AND "name" = @1 AND "database" = @2 AND "schema" = @3 AND "table" = @4`, ["GENERATED_COLUMN","subscription_code","master","dbo","subscription"]);
        await queryRunner.query(`DROP TABLE "subscription"`);
        await queryRunner.query(`DROP TABLE "user_settings"`);
        await queryRunner.query(`DROP TABLE "user_activity"`);
    }

}
